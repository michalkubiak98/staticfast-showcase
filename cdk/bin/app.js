#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("dotenv/config");
const cdk = require("aws-cdk-lib");
const staticfast_stack_1 = require("../lib/staticfast-stack");
// Load environment variables from parent directory
const path = require('path');
require('dotenv').config({ path: path.join(__dirname, '../../.env') });
const app = new cdk.App();
// Read configuration from environment variables
const config = {
    projectSlug: process.env.PROJECT_SLUG || 'my-project',
    domainName: process.env.DOMAIN_NAME,
    wwwRedirect: process.env.WWW_REDIRECT === 'true',
    businessName: process.env.BUSINESS_NAME || 'My Business',
    awsRegion: process.env.AWS_REGION || 'us-east-1',
    awsAccountId: process.env.AWS_ACCOUNT_ID,
};
// Validate required environment variables
if (!config.awsAccountId) {
    throw new Error('AWS_ACCOUNT_ID environment variable is required');
}
// Ensure awsAccountId is not undefined for the config
const validatedConfig = {
    ...config,
    awsAccountId: config.awsAccountId,
};
new staticfast_stack_1.StaticFastStack(app, `${config.projectSlug}-stack`, {
    env: {
        account: config.awsAccountId,
        region: config.awsRegion,
    },
    config: validatedConfig,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHlCQUF1QjtBQUN2QixtQ0FBbUM7QUFDbkMsOERBQTBEO0FBRTFELG1EQUFtRDtBQUNuRCxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7QUFFdkUsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7QUFFMUIsZ0RBQWdEO0FBQ2hELE1BQU0sTUFBTSxHQUFHO0lBQ2IsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxJQUFJLFlBQVk7SUFDckQsVUFBVSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVztJQUNuQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEtBQUssTUFBTTtJQUNoRCxZQUFZLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLElBQUksYUFBYTtJQUN4RCxTQUFTLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLElBQUksV0FBVztJQUNoRCxZQUFZLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjO0NBQ3pDLENBQUM7QUFFRiwwQ0FBMEM7QUFDMUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUU7SUFDeEIsTUFBTSxJQUFJLEtBQUssQ0FBQyxpREFBaUQsQ0FBQyxDQUFDO0NBQ3BFO0FBRUQsc0RBQXNEO0FBQ3RELE1BQU0sZUFBZSxHQUFHO0lBQ3RCLEdBQUcsTUFBTTtJQUNULFlBQVksRUFBRSxNQUFNLENBQUMsWUFBc0I7Q0FDNUMsQ0FBQztBQUVGLElBQUksa0NBQWUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxNQUFNLENBQUMsV0FBVyxRQUFRLEVBQUU7SUFDdEQsR0FBRyxFQUFFO1FBQ0gsT0FBTyxFQUFFLE1BQU0sQ0FBQyxZQUFZO1FBQzVCLE1BQU0sRUFBRSxNQUFNLENBQUMsU0FBUztLQUN6QjtJQUNELE1BQU0sRUFBRSxlQUFlO0NBQ3hCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCAnZG90ZW52L2NvbmZpZyc7XG5pbXBvcnQgKiBhcyBjZGsgZnJvbSAnYXdzLWNkay1saWInO1xuaW1wb3J0IHsgU3RhdGljRmFzdFN0YWNrIH0gZnJvbSAnLi4vbGliL3N0YXRpY2Zhc3Qtc3RhY2snO1xuXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIHBhcmVudCBkaXJlY3RvcnlcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoeyBwYXRoOiBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vLi4vLmVudicpIH0pO1xuXG5jb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xuXG4vLyBSZWFkIGNvbmZpZ3VyYXRpb24gZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IGNvbmZpZyA9IHtcbiAgcHJvamVjdFNsdWc6IHByb2Nlc3MuZW52LlBST0pFQ1RfU0xVRyB8fCAnbXktcHJvamVjdCcsXG4gIGRvbWFpbk5hbWU6IHByb2Nlc3MuZW52LkRPTUFJTl9OQU1FLFxuICB3d3dSZWRpcmVjdDogcHJvY2Vzcy5lbnYuV1dXX1JFRElSRUNUID09PSAndHJ1ZScsXG4gIGJ1c2luZXNzTmFtZTogcHJvY2Vzcy5lbnYuQlVTSU5FU1NfTkFNRSB8fCAnTXkgQnVzaW5lc3MnLFxuICBhd3NSZWdpb246IHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgJ3VzLWVhc3QtMScsXG4gIGF3c0FjY291bnRJZDogcHJvY2Vzcy5lbnYuQVdTX0FDQ09VTlRfSUQsXG59O1xuXG4vLyBWYWxpZGF0ZSByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmlmICghY29uZmlnLmF3c0FjY291bnRJZCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0FXU19BQ0NPVU5UX0lEIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJyk7XG59XG5cbi8vIEVuc3VyZSBhd3NBY2NvdW50SWQgaXMgbm90IHVuZGVmaW5lZCBmb3IgdGhlIGNvbmZpZ1xuY29uc3QgdmFsaWRhdGVkQ29uZmlnID0ge1xuICAuLi5jb25maWcsXG4gIGF3c0FjY291bnRJZDogY29uZmlnLmF3c0FjY291bnRJZCBhcyBzdHJpbmcsXG59O1xuXG5uZXcgU3RhdGljRmFzdFN0YWNrKGFwcCwgYCR7Y29uZmlnLnByb2plY3RTbHVnfS1zdGFja2AsIHtcbiAgZW52OiB7XG4gICAgYWNjb3VudDogY29uZmlnLmF3c0FjY291bnRJZCxcbiAgICByZWdpb246IGNvbmZpZy5hd3NSZWdpb24sXG4gIH0sXG4gIGNvbmZpZzogdmFsaWRhdGVkQ29uZmlnLFxufSk7Il19